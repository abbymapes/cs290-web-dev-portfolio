(function(e){function t(t){for(var s,o,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},n={app:0},a=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"0a08":function(e,t,r){"use strict";r("7abc")},"0f18":function(e,t,r){"use strict";r("ec19")},"0f58":function(e,t){t.FIREBASE_FIRESTORE={API_KEY:"AIzaSyCaalDTvioxdSo2oyXV1s4wZHTsQYRtIyg",AUTH_DOMAIN:"bluebook-153fe.firebaseapp.com",PROJECT_ID:"bluebook-153fe",STORAGE_BUCKET:"bluebook-153fe.appspot.com",MESSAGING_SENDER_ID:"1053091116434",APP_ID:"1:1053091116434:web:dff9bf6545328227583d4b",MEASUREMENT_ID:"G-7B391GWBSY"},t.DUKE_API={API_KEY:"07ebfea77585b8fa844c8034c56f740c",URL_BASE:"https://streamer.oit.duke.edu/curriculum/courses/"}},"12e6":function(e,t,r){},"1de0":function(e,t,r){},"1ea6":function(e,t,r){},"2afe":function(e,t,r){},3193:function(e,t,r){},"37ea":function(e,t,r){"use strict";r("3193")},3922:function(e,t,r){},"40d9":function(e,t,r){},5638:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("e792"),r("0cdd");var s=r("2b0e"),n=r("5f5b"),a=r("0759");r("ab8b"),r("2dd8");s["default"].use(n["b"]);r("1ea6");var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"main-navbar-section"},[r("nav-bar",{attrs:{sections:e.getNavBarTitles,isCentered:!1,currentPage:e.currentPage},on:{"change-page":e.changePage}})],1),r("b-overlay",{staticClass:"overlay",attrs:{show:e.pageLoading,"no-center":""}},[r("div",{staticClass:"page-content"},["feed"==e.currentPage?r("feed-page",{on:{"user-page":e.goToUserPage,"course-page":e.goToCoursePage}}):e._e(),"explore"==e.currentPage?r("explore-page",{on:{"user-page":e.goToUserPage,"course-page":e.goToCoursePage,"subject-page":e.goToSubjectPage,"attribute-page":e.goToAttributePage}}):e._e(),"profile"==e.currentPage?r("user-page",{attrs:{requestedUid:e.currentUid,isAdmin:e.isAdmin},on:{"user-page":e.goToUserPage,"course-page":e.goToCoursePage,"subject-page":e.goToSubjectPage,"sign-out":e.signOutUser}}):e._e(),"login"==e.currentPage?r("log-in-page",{on:{"update-user":e.updateUser,"sign-up":function(t){e.currentPage="signup"}}}):e._e(),"signup"==e.currentPage?r("sign-up-page",{on:{"update-user":e.updateUser}}):e._e(),"user"==e.currentPage?r("user-page",{attrs:{requestedUid:e.requestedUid,isAdmin:e.isAdmin},on:{"user-page":e.goToUserPage,"course-page":e.goToCoursePage,"subject-page":e.goToSubjectPage}}):e._e(),"course"==e.currentPage?r("course-page",{attrs:{isAdmin:e.isAdmin,requestedCourseId:e.requestedCourseId,course:e.requestedCourse},on:{"user-page":e.goToUserPage,"attribute-page":e.goToAttributePage}}):e._e(),"subject"==e.currentPage?r("subject-page",{attrs:{isAdmin:e.isAdmin,subjectCode:e.requestedSubject.code,subjectName:e.requestedSubject.name},on:{"course-page":e.goToCoursePage}}):e._e(),"attribute"==e.currentPage?r("attribute-page",{attrs:{attributeName:e.requestedAttribute},on:{"course-page":e.goToCoursePage}}):e._e(),"admin"==e.currentPage?r("admin-page",{attrs:{user:e.currentUser},on:{"user-page":e.goToUserPage,"sign-out":e.signOutUser}}):e._e()],1)])],1)},i=[],c=r("1da1"),u=(r("d3b7"),r("99af"),r("96cf"),r("260b")),l=(r("588e"),r("ea7b"),r("0f58")),d={apiKey:l["FIREBASE_FIRESTORE"].API_KEY,authDomain:l["FIREBASE_FIRESTORE"].AUTH_DOMAIN,projectId:l["FIREBASE_FIRESTORE"].PROJECT_ID,storageBucket:l["FIREBASE_FIRESTORE"].STORAGE_BUCKET,messagingSenderId:l["FIREBASE_FIRESTORE"].MESSAGING_SENDER_ID,appId:l["FIREBASE_FIRESTORE"].APP_ID,measurementId:l["FIREBASE_FIRESTORE"].MEASUREMENT_ID},m=u["a"].initializeApp(d),g=m.auth(),f=m.storage(),p={userId:""},h=!0,b=h?"https://tranquil-hollows-68915.herokuapp.com":"";function v(e,t){return w.apply(this,arguments)}function w(){return w=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=f.ref().child("profile/".concat(t,".jpg")),e.next=3,s.put(r).then((function(e){console.log(e),console.log("Uploaded user file!")})).catch((function(e){throw new Error("Error uploading profile image for user ".concat(t,": ").concat(e))}));case 3:return e.next=5,s.getDownloadURL().then((function(e){return e})).catch((function(e){throw new Error("Error uploading profile image for user ".concat(t,": ").concat(e))}));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function R(){return C.apply(this,arguments)}function C(){return C=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t=g.currentUser,t.delete().then((function(){console.log("User deleted")})),p.userId=""}catch(r){console.log("Error deleting user")}case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function k(e){return j.apply(this,arguments)}function j(){return j=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t?t.uid!==p.userId&&(p.userId=t.uid):p.userId="";case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}var y={currentUser:p,auth:g,SERVER_URL:b,storeProfileImage:v,deleteUser:R,updateUser:k},_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.pageLoading,"no-center":""}},[r("b-avatar",{attrs:{size:"10rem",src:e.user.picture,alt:e.user.displayName+"Profile Picture"}}),r("h1",{attrs:{id:"page-name"}},[e._v(e._s(e.user.displayName))]),r("div",[r("b-button",{staticClass:"button",attrs:{variant:"outline-primary","aria-label":"Sign Out"},on:{click:e.signOut}},[e._v("Sign Out")])],1),e.validResults?r("user-section",{attrs:{userList:e.results},on:{"user-page":e.goToUserPage}}):"users"!=e.currentSection||e.validFriends?e._e():r("span",[e._v(" We couldn't load the users for BlueBook. Please refresh the page and try again. ")])],1),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},x=[],S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[r("h1",{attrs:{id:"section-title"}},[e._v("Users")]),r("waterfall",{attrs:{options:e.options}},e._l(e.userList,(function(t,s){return r("waterfall-item",{key:s,staticClass:"waterfall-item",attrs:{order:s}},[r("user",{staticClass:"user",attrs:{user:t},on:{selected:e.goToUserPage}})],1)})),1)],1)],1)},P=[],E=r("eae8"),U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"border-variant":"light"},on:{click:e.goToUserPage}},[r("b-avatar",{attrs:{size:"10rem",src:e.user.picture,alt:e.user.displayName+"Profile Picture"}}),r("b-card-title",{staticClass:"title"},[e._v(" "+e._s(e.user.displayName)+" ")]),null!=e.user.visits?r("b-card-body",[e._v(" Times Visiting Site: "+e._s(e.user.visits)+" ")]):e._e()],1)},I=[],T={name:"User",components:{},props:{user:Object},data:function(){return{}},methods:{goToUserPage:function(){this.$emit("selected",this.user.userId)}},computed:{},watch:{}},M=T,O=(r("37ea"),r("2877")),L=Object(O["a"])(M,U,I,!1,null,"561cfa23",null),A=L.exports,V={name:"UserSection",components:{User:A,Waterfall:E["Waterfall"],WaterfallItem:E["WaterfallItem"]},props:{userList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,options:{}}},methods:{goToUserPage:function(e){this.$emit("user-page",e)}}},N=V,F=(r("7c5d"),Object(O["a"])(N,S,P,!1,null,"b4d53cdc",null)),$=F.exports,q={name:"AdminPage",components:{UserSection:$},props:{user:Object},data:function(){return{pageLoading:!1,currentUid:this.user.userId,showError:!1,errorMessage:"",editingProfile:!1,results:[],validResults:!0,loggedIn:!1}},methods:{getAllUsers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getUsersForAdmin"));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.results=s.results,e.totalResults=s.totalResults,e.validResults=!0):(e.validSubjects=!1,e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},signOut:function(){var e=this;this.pageLoading=!0,y.auth.signOut().then((function(){e.$emit("sign-out")})).catch((function(t){e.errorMessage="An error occurred while signing out: ".concat(t,"."),e.showError=!0})),this.pageLoading=!1},goToUserPage:function(e){this.$emit("user-page",e)}},computed:{},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,t.next=3,e.getAllUsers();case 3:e.pageLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}},D=q,z=(r("8372"),Object(O["a"])(D,_,x,!1,null,"c1c8d36c",null)),B=z.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nav-bar"},e._l(e.sections,(function(t,s){return r("a",{key:s,class:e.isCurrentPage(t.value)+" "+e.isCenterClass,on:{click:function(r){e.changedPage=!0,e.selectedPage=t.value}}},[e._v(" "+e._s(t.name)+" ")])})),0)},G=[],J={name:"NavBar",props:{sections:{type:Array,default:function(){return[]}},currentPage:String,isCentered:Boolean},data:function(){return{selectedPage:this.currentPage,changedPage:!0}},methods:{isCurrentPage:function(e){return e===this.currentPage?"home":""}},computed:{isCenterClass:function(){return this.isCentered?"centered":""}},watch:{selectedPage:function(){this.changedPage&&(this.$emit("change-page",this.selectedPage),this.changedPage=!1)},currentPage:function(){this.selectedPage=this.currentPage}}},Y=J,K=(r("0f18"),Object(O["a"])(Y,W,G,!1,null,"2fbfdd1c",null)),H=K.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{attrs:{id:"page-name"}},[e._v("Feed")]),r("b-overlay",{attrs:{show:e.loading,rounded:"sm"}},[!e.disablePage&&e.reactions.length>0?r("span",e._l(e.reactions,(function(t){return r("b-card",{key:t.reactionId,staticClass:"reaction-feed"},[r("reaction",{attrs:{reactionId:t.reactionId,type:t.type,date:t.date,course:t.course,user:t.user},on:{"course-page":e.goToCoursePage,"user-page":e.goToUserPage}})],1)})),1):e.disablePage?r("span",[e._v(" Couldn't load your feed. Please refresh the page and try again. ")]):r("span",[e._v(" Your friends haven't reacted to any classes yet! ")])]),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},Q=[],Z=(r("caad"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-overlay",{attrs:{show:e.loading,rounded:"sm"}},[e.showReactionError||e.loading?r("div",{staticClass:"modal-body"},[e._v("Error retrieving Reaction: "+e._s(e.errorMessage))]):r("div",{staticClass:"modal-body reaction"},[r("div",{staticClass:"date"},[e._v(e._s(e.date))]),r("div",{staticClass:"left",on:{click:function(t){return e.goToUserPage(e.user.userId)}}},[r("h1",{staticClass:"reaction-header"},[r("b-avatar",{attrs:{size:"5rem",src:e.user.picture,alt:e.user.displayName+"Profile Picture"}}),e._v(" "+e._s(e.user.displayName))],1)]),r("span",{staticClass:"type"},[e._v(e._s(e.reactionVerb)+" "),"like"==e.type?r("b-icon",{attrs:{icon:"hand-thumbs-up","aria-hidden":"true"}}):"dislike"==e.type?r("b-icon",{attrs:{icon:"hand-thumbs-down","aria-hidden":"true"}}):"wishlist"==e.type?r("b-icon",{attrs:{icon:"bag-plus","aria-hidden":"true"}}):e._e()],1),r("class",{staticClass:"class",attrs:{type:e.type,course:e.course},on:{"selected-course":e.goToCoursePage}}),r("br"),r("h2",[e._v("Comments")]),r("b-overlay",{attrs:{show:e.commentsLoading,rounded:"sm"}},[e.loggedIn?r("div",[r("b-input-group",{staticClass:"mb-3",attrs:{size:"sm"}},[r("b-form-textarea",{attrs:{id:"comment-textarea",placeholder:"Leave a comment here",rows:"1","max-rows":"8"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postComment(t)}},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}}),r("b-input-group-append",[r("b-button",{attrs:{size:"sm",text:"Button",variant:"success",disabled:0==e.newComment.trim().length},on:{click:e.postComment}},[e._v(" Post ")])],1)],1)],1):e._e(),r("comment-section",{attrs:{comments:e.displayComments},on:{"user-page":e.goToUserPage,"delete-comment":e.deleteComment}}),r("b-pagination",{attrs:{"total-rows":e.totalComments,"per-page":e.perPage,"aria-controls":"comment-section",pills:"","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)])}),ee=[],te=(r("fb6a"),r("498a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{title:e.course.subjectCode+" "+e.course.catalogNumber,"border-variant":e.getBorderStyle},on:{click:function(t){return e.goToCoursePage(e.course)}}},[r("b-card-text",[e._v(" "+e._s(e.course.title)+" ")])],1)}),re=[],se={name:"Class",components:{},props:{type:String,course:Object,reactionId:{type:String,required:!1},date:{type:String,required:!1}},data:function(){return{styles:{like:"success",dislike:"danger",wishlist:"warning"}}},methods:{goToCoursePage:function(e){this.isReaction?this.$emit("selected-reaction",this.type,this.course,this.reactionId,this.date):this.$emit("selected-course",e)}},computed:{getBorderStyle:function(){return this.styles[this.type]?this.styles[this.type]:"dark"},isReaction:function(){return!!this.reactionId}}},ne=se,ae=(r("f75a"),Object(O["a"])(ne,te,re,!1,null,"323b3611",null)),oe=ae.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.comments.length>0?r("table",{attrs:{id:"comment-section"}},e._l(e.comments,(function(t,s){return r("tr",{key:s},[e.isCreator(t.user.userId)?r("div",{staticClass:"creator"},[r("span",{on:{click:function(r){return e.goToUserPage(t.user.userId)}}},[r("span",{staticClass:"body"},[r("span",{staticClass:"content"},[r("span",{staticClass:"text"},[e._v(e._s(t.commentText))])])]),r("b-avatar",{attrs:{size:"2rem",src:t.user.picture,alt:t.user.displayName+"Profile Picture"}})],1),r("b-button",{staticClass:"delete-button",attrs:{variant:"outline-danger"},on:{click:function(r){return e.deleteComment(t.commentId)}}},[e._v(" X ")])],1):r("div",{staticClass:"not-creator"},[r("div",{staticClass:"not-creator"},[r("b-avatar",{attrs:{size:"2rem",src:t.user.picture,alt:t.user.displayName+"Profile Picture"},on:{click:function(r){return e.goToUserPage(t.user.userId)}}}),r("span",{staticClass:"name",on:{click:function(r){return e.goToUserPage(t.user.userId)}}},[e._v(e._s(t.user.displayName))])],1),r("span",{staticClass:"body"},[r("span",{staticClass:"content"},[r("span",{staticClass:"text"},[e._v(e._s(t.commentText))])])])])])})),0):r("table",{attrs:{id:"comment-section"}},[r("tr",{staticClass:"center"},[e._v(" No Comments Yet ")])])},ce=[],ue={name:"CommentSection",props:{comments:{type:Array,default:function(){return[]}}},methods:{isCreator:function(e){return e===y.currentUser.userId},goToUserPage:function(e){this.$emit("user-page",e)},deleteComment:function(e){this.$emit("delete-comment",e)}}},le=ue,de=(r("e272"),Object(O["a"])(le,ie,ce,!1,null,"75f5ef88",null)),me=de.exports,ge={name:"Reaction",components:{Class:oe,CommentSection:me},props:{reactionId:String,date:String,type:String,course:Object,user:Object,isAdmin:{type:Boolean,required:!1,default:!1}},data:function(){return{loading:!1,currentUid:y.currentUser.userId,showReactionError:!1,errorMessage:"",comments:[],perPage:3,currentPage:1,newComment:"",commentsLoading:!1}},methods:{goToCoursePage:function(e){this.clearData(),this.$emit("course-page",e)},closeModal:function(){this.clearData(),this.$emit("close-reaction")},goToUserPage:function(e){this.clearData(),this.$emit("user-page",e)},clearData:function(){this.showReactionError=!1,this.errorMessage="",this.comments=[],this.newComment=""},displayReactionModal:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.commentsLoading=!0,e.showReactionError=!1,e.errorMessage="",t.next=6,fetch("".concat(y.SERVER_URL,"/bluebook/getReactionComments?reactionId=").concat(e.reactionId));case 6:return r=t.sent,t.next=9,r.json();case 9:s=t.sent,r.ok?e.comments=s:(e.errorMessage=s.message,e.showReactionError=!0),e.commentsLoading=!1,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},postComment:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.commentsLoading=!0,!e.isValidComment){t.next=15;break}return e.errorMessage="",e.comments=[],r={reactionId:e.reactionId,userId:e.currentUid,commentText:e.newComment},t.next=7,fetch("".concat(y.SERVER_URL,"/bluebook/postReactionComment"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});case 7:return s=t.sent,t.next=10,s.json();case 10:n=t.sent,e.newComment="",s.ok?e.comments=n:(e.errorMessage=n.message,e.showReactionError=!0),t.next=18;break;case 15:console.log("BAD USER INPUT: Unable to comment on reaction due to invalid input."),e.errorMessage="Invalid comment: cannot write comment document with empty userId or courseId. Please try again.",e.showReactionError=!0;case 18:e.commentsLoading=!1;case 19:case"end":return t.stop()}}),t)})))()},deleteComment:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.commentsLoading=!0,t.errorMessage="",t.comments=[],t.newComment="",r.next=6,fetch("".concat(y.SERVER_URL,"/bluebook/deleteReactionComment?commentId=").concat(e,"&reactionId=").concat(t.reactionId));case 6:return s=r.sent,r.next=9,s.json();case 9:n=r.sent,s.ok?t.comments=n:(t.errorMessage=n.message,t.showReactionError=!0),t.commentsLoading=!1;case 12:case"end":return r.stop()}}),r)})))()}},computed:{loggedIn:function(){return!this.isAdmin&&this.currentUid.length>0},reactionVerb:function(){return["like","dislike"].includes(this.type)?"".concat(this.type.toUpperCase(),"S"):"WANTS TO TAKE"},numPages:function(){return Math.ceil(this.totalComments/this.perPage)},displayComments:function(){var e=(this.currentPage-1)*this.perPage;return this.comments.slice(e,e+this.perPage)},totalComments:function(){return this.comments.length},isValidComment:function(){return""!==this.requestedCourseId&&""!==this.currentUid&&""!==this.newComment.trim()}},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.displayReactionModal();case 2:case"end":return t.stop()}}),t)})))()}},fe=ge,pe=(r("5763"),Object(O["a"])(fe,Z,ee,!1,null,"7fd22468",null)),he=pe.exports,be={name:"FeedPage",components:{Reaction:he},props:{},data:function(){return{loading:!1,showError:!1,reactions:[],errorMessage:"",options:{itemMargin:10,containerWidth:10,itemClassName:"item",gridWidth:100,transitionDuration:".5"},disablePage:!1,currentUid:y.currentUser.userId}},methods:{reactionVerb:function(e){return["like","dislike"].includes(e)?"".concat(e,"s"):"wants to take"},goToCoursePage:function(e){this.$emit("course-page",e)},goToUserPage:function(e){this.$emit("user-page",e)},getFeedReaction:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getFriendsReactions?userId=").concat(e.currentUid));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?e.reactions=s:(e.errorMessage=s.message,e.showError=!0,e.disablePage=!0);case 7:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getFeedReaction();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},ve=be,we=(r("c5ad"),Object(O["a"])(ve,X,Q,!1,null,"797973be",null)),Re=we.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{attrs:{id:"page-name"}},[e._v("Explore")]),r("b-overlay",{staticClass:"overlay",attrs:{show:e.pageLoading,"no-center":""}},[r("div",{staticClass:"search"},[r("b-input-group",{staticClass:"mb-3",attrs:{size:"sm",prepend:e.searchLabel}},[r("b-form-input",{attrs:{"aria-label":"Search text for "+e.currentSection},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchResults(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("b-input-group-append",[e.isFiltered?e._e():r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.searchResults}},[e._v("Search")]),e.isFiltered?r("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:e.clearSearch}},[e._v("Clear Search")]):e._e()],1)],1)],1),r("nav-bar",{attrs:{sections:e.sectionTitles,currentPage:e.currentSection,isCentered:!0},on:{"change-page":e.changeSection}}),"attributes"!=e.currentSection&&e.validResults?r("span",["subjects"==e.currentSection?r("subjects-section",{attrs:{subjectList:e.results,hasSubjectNames:!0},on:{"subject-page":e.goToSubjectPage}}):"courses"==e.currentSection?r("classes-section",{attrs:{classes:e.results},on:{"course-page":e.goToCoursePage}}):"users"==e.currentSection?r("user-section",{attrs:{userList:e.results},on:{"user-page":e.goToUserPage}}):e._e(),e.results.length>0&&e.hasMoreResults?r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.getMoreClasses}},[e._v(" See More Courses ")]):e._e()],1):"attributes"==e.currentSection&&e.validResults?r("span",[r("attribute-section",{attrs:{attributeList:e.results},on:{"attribute-page":e.goToAttributePage}})],1):e.validResults?e._e():r("span",[e._v(" We couldn't load the "+e._s(e.currentSection)+". Please refresh the page and try again. ")])],1),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},ke=[],je=(r("159b"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[r("h1",{attrs:{id:"section-title"}},[e._v("Course Attributes")]),r("waterfall",{attrs:{options:e.options}},e._l(e.attributeList,(function(t,s){return r("waterfall-item",{key:s,staticClass:"waterfall-item",attrs:{order:s}},[r("b-card",{attrs:{id:e.getItemCode(t.name)},on:{click:function(r){return e.goToAttributePage(t.name)}}},[r("b-card-text",{staticClass:"attribute-name"},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),1)],1)],1)}),ye=[],_e=(r("1276"),r("ac1f"),{name:"AttributeSection",components:{Waterfall:E["Waterfall"],WaterfallItem:E["WaterfallItem"]},props:{attributeList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,options:{}}},methods:{goToAttributePage:function(e){this.$emit("attribute-page",e)},getItemCode:function(e){return e.split(" ")[0]}}}),xe=_e,Se=(r("e4a6"),Object(O["a"])(xe,je,ye,!1,null,"3960107e",null)),Pe=Se.exports,Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.classesLoading,"no-center":""}},[r("h1",{attrs:{id:"section-title"}},[e._v("Classes")]),r("div",[r("waterfall",{attrs:{options:e.options}},e._l(e.classes,(function(t,s){return r("waterfall-item",{key:s,staticClass:"waterfall-item",attrs:{order:s}},[r("class",{attrs:{type:"course",course:t},on:{"selected-course":e.goToCoursePage}})],1)})),1)],1)])],1)},Ue=[],Ie={name:"ClassesSection",components:{Class:oe,Waterfall:E["Waterfall"],WaterfallItem:E["WaterfallItem"]},props:{classes:{type:Array,default:function(){return[]}}},data:function(){return{classesLoading:!1,options:{}}},methods:{goToCoursePage:function(e){this.$emit("course-page",e)}}},Te=Ie,Me=Object(O["a"])(Te,Ee,Ue,!1,null,"69af8a4a",null),Oe=Me.exports,Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.subjectsLoading,"no-center":""}},[r("h1",{attrs:{id:"section-title"}},[e._v("Subjects")]),r("waterfall",{attrs:{options:e.options}},e._l(e.subjectNames,(function(t,s){return r("waterfall-item",{key:s,staticClass:"waterfall-item",attrs:{order:s}},[r("b-card",{attrs:{title:e.getType(t.type,t.code)},on:{click:function(r){return e.goToSubjectPage(t.code,t.name)}}},[r("b-card-text",{staticClass:"subject-name"},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),1)],1)],1)},Ae=[],Ve={name:"SubjectsSection",components:{Waterfall:E["Waterfall"],WaterfallItem:E["WaterfallItem"]},props:{subjectList:{type:Array,default:function(){return[]}},hasSubjectNames:{type:Boolean,default:!1,required:!1}},data:function(){return{subjectsLoading:!1,subjectNames:[],options:{}}},methods:{goToSubjectPage:function(e,t){this.$emit("subject-page",e,t)},getSubjectNames:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getSubjectNames"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.subjectList)});case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?e.subjectNames=s:e.$emit("show-error",s.message);case 7:case"end":return t.stop()}}),t)})))()},getType:function(e,t){return e&&["major","minor","certificate","other"].includes(e)?"other"===e?"Interested In":e.charAt(0).toUpperCase()+e.slice(1):t}},watch:{subjectList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.subjectsLoading=!0,!e.hasSubjectNames){t.next=5;break}e.subjectNames=e.subjectList,t.next=7;break;case 5:return t.next=7,e.getSubjectNames();case 7:e.subjectsLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.subjectsLoading=!0,!e.hasSubjectNames){t.next=5;break}e.subjectNames=e.subjectList,t.next=7;break;case 5:return t.next=7,e.getSubjectNames();case 7:e.subjectsLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}},Ne=Ve,Fe=(r("582a"),Object(O["a"])(Ne,Le,Ae,!1,null,"211ed5de",null)),$e=Fe.exports,qe={name:"ExplorePage",components:{AttributeSection:Pe,ClassesSection:Oe,NavBar:H,SubjectsSection:$e,UserSection:$},props:{},data:function(){return{showError:!1,errorMessage:"",pageLoading:!1,currentSection:"subjects",sectionTitles:[{name:"Subjects",value:"subjects"},{name:"Attributes",value:"attributes"},{name:"Users",value:"users"}],validResults:!0,results:[],currentStart:0,totalResults:0,perPage:25,lastValue:"",searchText:"",isFiltered:!1}},methods:{changeSection:function(e){this.pageLoading=!0,this.currentSection=e,this.pageLoading=!1},goToSubjectPage:function(e,t){this.$emit("subject-page",e,t)},goToUserPage:function(e){this.$emit("user-page",e)},goToCoursePage:function(e){this.$emit("course-page",e)},goToAttributePage:function(e){this.$emit("attribute-page",e)},getAllResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getDocuments?collection=").concat(e.currentSection,"&start=").concat(encodeURIComponent(e.lastValue),"&numResults=").concat(e.perPage));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!1,e.results=e.results.concat(s.results),e.totalResults=s.totalResults,e.lastValue=s.lastValue,e.validResults=!0,e.currentStart+=e.perPage):(e.validSubjects=!1,e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},getFilteredResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getFilteredDocuments?collection=").concat(e.currentSection,"&searchTerm=").concat(encodeURIComponent(e.searchText)));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!0,e.results=e.results.concat(s.results),e.totalResults=s.totalResults,e.currentStart+=e.totalResults,e.lastValue=s.lastValue,e.validResults=!0):(e.validSubjects=!1,e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},getMoreClasses:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pageLoading=!0,!e.hasMoreResults||e.isFiltered){t.next=4;break}return t.next=4,e.getAllResults();case 4:e.pageLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},searchResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,e.results=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=7,e.getFilteredResults();case 7:e.pageLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},clearSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,e.searchText="",e.results=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=8,e.getAllResults();case 8:e.pageLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}},computed:{hasMoreResults:function(){return this.currentStart<this.totalResults},searchLabel:function(){var e=this,t="";return this.sectionTitles.forEach((function(r){r.value===e.currentSection&&(t=r.name)})),t}},watch:{currentSection:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,e.isFiltered=!1,e.searchText="",e.results=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=9,e.getAllResults();case 9:e.pageLoading=!1;case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,t.next=3,e.getAllResults();case 3:e.pageLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}},De=qe,ze=(r("c666"),Object(O["a"])(De,Ce,ke,!1,null,"5e4157be",null)),Be=ze.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.pageLoading,"no-center":""}},[e.validUser?r("span",[r("b-avatar",{attrs:{size:"10rem",src:e.user.picture,alt:e.user.displayName+"Profile Picture"}}),r("h1",{attrs:{id:"page-name"}},[e._v(e._s(e.user.displayName))]),e.loggedIn?r("span",[e.validFollowStatus?r("span",[e.isViewingProfile||e.isFollowing?e._e():r("b-button",{staticClass:"button",attrs:{variant:"outline-success","aria-label":"Add Friend"},on:{click:e.addFriend}},[e._v("Add Friend")]),!e.isViewingProfile&&e.isFollowing?r("b-button",{staticClass:"button",attrs:{variant:"outline-danger","aria-label":"Remove Friend"},on:{click:e.removeFriend}},[e._v("Remove Friend")]):e._e(),e.isViewingProfile?r("div",[r("b-button",{staticClass:"button",attrs:{variant:"outline-primary","aria-label":"Edit Profile"},on:{click:e.editProfile}},[e._v("Edit Profile")]),r("b-button",{staticClass:"button",attrs:{variant:"outline-primary","aria-label":"Sign Out"},on:{click:e.signOut}},[e._v("Sign Out")])],1):e._e()],1):r("span",[e._v(" We couldn't retrieve your relationship with this user. Please refresh the page and try again. ")])]):e._e(),r("b-modal",{attrs:{"hide-footer":"",scrollable:"",lazy:"",size:"lg"},model:{value:e.editingProfile,callback:function(t){e.editingProfile=t},expression:"editingProfile"}},[r("edit-profile",{attrs:{user:e.user},on:{"show-error":e.showEditError,"cancel-edit":e.cancelEdit,"refresh-user":e.refreshUser}})],1),r("nav-bar",{attrs:{sections:e.sectionTitles,currentPage:e.currentSection,isCentered:!0},on:{"change-page":e.changeSection}}),"classes"==e.currentSection&&e.validReactions?r("user-reaction-section",{attrs:{requestedUid:e.requestedUid},on:{"show-reaction":e.displayReactionModal,"show-error":e.showReactionError}}):"classes"!=e.currentSection||e.validReactions?e._e():r("span",[e._v(" We couldn't load reactions for this user. Please refresh the page and try again. ")]),"subjects"==e.currentSection&&e.validSubjects?r("subjects-section",{attrs:{subjectList:e.fullSubjectList},on:{"subject-page":e.goToSubjectPage,"show-error":e.showSubjectError}}):"subjects"!=e.currentSection||e.validSubjects?e._e():r("span",[e._v(" We couldn't load the subjects for this user. Please refresh the page and try again. ")]),"friends"==e.currentSection&&e.validFriends?r("people-section",{attrs:{requestedUid:e.requestedUid},on:{"user-page":e.goToUserPage,"show-error":e.showPeopleError}}):"friends"!=e.currentSection||e.validFriends?e._e():r("span",[e._v(" We couldn't load the friends for this user. Please refresh the page and try again. ")]),r("reaction-modal",{attrs:{show:e.showReaction,reactionId:e.selectedReactionId,type:e.selectedReactionType,date:e.selectedReactionDate,course:e.selectedReactionCourse,user:e.user,isAdmin:e.isAdmin},on:{"close-reaction":e.closeReaction,"course-page":e.goToCoursePage,"user-page":e.goToUserPage}})],1):r("span",[e._v(" We couldn't find this user. Please refresh the page and try again. ")])]),r("b-modal",{staticClass:"my-4",model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},Ge=[],Je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit-profile"},[r("h1",{staticClass:"modal-title"},[e._v("Edit Profile")]),r("b-overlay",{attrs:{show:e.loading,rounded:"sm"}},[e.validPage?r("div",{staticClass:"sign-up"},[r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[e.form.picture?r("b-avatar",{attrs:{size:"10rem",src:e.getThumbnail}}):r("b-avatar",{attrs:{size:"10rem",src:e.form.oldPicture}}),r("br"),r("b-form-group",{attrs:{id:"picture-label",label:"Choose a Profile Picture:","label-for":"input-picture"}},[r("b-form-file",{staticClass:"file",attrs:{id:"input-picture",accept:"image/*"},model:{value:e.form.picture,callback:function(t){e.$set(e.form,"picture",t)},expression:"form.picture"}}),e.form.oldPicture.length>0?r("div",[r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-danger"},on:{click:e.removePhoto}},[e._v("Remove Photo")])],1):e._e(),e.form.picture?r("div",[r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-danger"},on:{click:e.clearFiles}},[e._v("Reset Photo")])],1):e._e()],1),r("b-form-group",{attrs:{id:"input-name",label:"Name:","label-for":"name-input"}},[r("b-form-input",{attrs:{id:"name-input",placeholder:"Enter name",required:""},model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}}),e.showState?r("b-form-invalid-feedback",{attrs:{state:e.nameValidation}},[e._v(" You cannot have an empty display name. ")]):e._e(),e.showState?r("b-form-valid-feedback",{attrs:{state:e.nameValidation}},[e._v(" Looks Good. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-majors",label:"Majors:","label-for":"major-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.major-modal",modifiers:{"major-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Major(s)")]),r("b-modal",{attrs:{id:"major-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"major-input",stacked:""},model:{value:e.form.majors,callback:function(t){e.$set(e.form,"majors",t)},expression:"form.majors"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validMajor(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.majors.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Majors"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayMajors))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearMajors}},[e._v("Clear Majors")])],1):e._e(),r("br"),r("b-form-group",{attrs:{id:"input-minors",label:"Minors:","label-for":"minor-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.minor-modal",modifiers:{"minor-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Minor(s)")]),r("b-modal",{attrs:{id:"minor-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"minor-input",stacked:""},model:{value:e.form.minors,callback:function(t){e.$set(e.form,"minors",t)},expression:"form.minors"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validMinor(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.minors.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Minors"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayMinors))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearMinors}},[e._v("Clear Minors")])],1):e._e(),r("br"),r("b-form-group",{attrs:{id:"input-certificates",label:"Certificates:","label-for":"certificate-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.certificate-modal",modifiers:{"certificate-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Certificates(s)")]),r("b-modal",{attrs:{id:"certificate-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"certificate-input",stacked:""},model:{value:e.form.certificates,callback:function(t){e.$set(e.form,"certificates",t)},expression:"form.certificates"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validCertificate(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.certificates.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Certificates"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayCertificates))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearCertificates}},[e._v("Clear Certificates")])],1):e._e(),r("br"),r("b-button",{staticClass:"submit-buttons",attrs:{type:"submit",variant:"outline-success"}},[e._v("Update Profile")]),r("b-button",{staticClass:"submit-buttons",attrs:{type:"reset",variant:"outline-danger"}},[e._v("Cancel Changes")])],1)],1):r("div",[e._v(" Sorry! There was an error. Please refresh and try again. ")])])],1)},Ye=[],Ke=(r("2532"),r("a15b"),r("2b3d"),r("3ca3"),r("ddb0"),{name:"EditProfile",props:{user:Object},data:function(){return{loading:!1,form:{displayName:this.user.displayName,oldPicture:this.user.picture,picture:null,majors:this.user.majors,minors:this.user.minors,certificates:this.user.certificates},subjects:[],errorMessage:"",validPage:!0,showState:!1}},methods:{onSubmit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,e.preventDefault(),t.showState=!0,!t.nameValidation){r.next=25;break}if(r.prev=4,s=null!==t.form.oldPicture?t.form.oldPicture:"",!t.form.picture){r.next=10;break}return r.next=9,y.storeProfileImage(t.user.userId,t.form.picture);case 9:s=r.sent;case 10:return n={userId:t.user.userId,displayName:t.form.displayName,email:t.user.email,majors:null!==t.form.majors?t.form.majors:[],minors:null!==t.form.minors?t.form.minors:[],certificates:null!==t.form.certificates?t.form.certificates:[],subjects:t.user.subjects,picture:s,isAdmin:t.user.isAdmin},r.next=13,fetch("".concat(y.SERVER_URL,"/bluebook/createUserDocument"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 13:return a=r.sent,r.next=16,a.json();case 16:o=r.sent,a.ok?t.$emit("refresh-user"):t.$emit("show-error",o.message),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](4),t.$emit("show-error","There was an error updating your account. Please try again.");case 23:r.next=27;break;case 25:console.log("BAD USER INPUT: Unable to edit user profile due to invalid display name."),t.$emit("show-error","We were unable to edit your profile. You must enter a valid display name for your account.");case 27:t.loading=!1;case 28:case"end":return r.stop()}}),r,null,[[4,20]])})))()},onReset:function(){this.form={displayName:this.user.displayName,picture:null,oldPicture:this.user.picture,majors:this.user.majors,minors:this.user.minors,certificates:this.user.certificates},this.$emit("cancel-edit")},clearMajors:function(){this.form.majors=[]},clearMinors:function(){this.form.minors=[]},clearCertificates:function(){this.form.certificates=[]},clearFiles:function(){this.form.picture=null},removePhoto:function(){this.form.oldPicture=""},getSubjects:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getAllSubjects"));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.subjects=s,e.validPage=!0):(e.$emit("show-error",s.message),e.validPage=!1);case 7:case"end":return t.stop()}}),t)})))()},validMajor:function(e){return this.form.minors.includes(e)||this.form.certificates.includes(e)},validMinor:function(e){return this.form.majors.includes(e)||this.form.certificates.includes(e)},validCertificate:function(e){return this.form.minors.includes(e)||this.form.majors.includes(e)}},computed:{displayMajors:function(){return this.form.majors.join(", ")},displayMinors:function(){return this.form.minors.join(", ")},displayCertificates:function(){return this.form.certificates.join(", ")},nameValidation:function(){return this.form.displayName.trim().length>0},getThumbnail:function(){return this.form.picture?URL.createObjectURL(this.form.picture):""}},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getSubjects();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}}),He=Ke,Xe=(r("0a08"),Object(O["a"])(He,Je,Ye,!1,null,"309f8ce2",null)),Qe=Xe.exports,Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reaction-section"},[r("b-overlay",{staticClass:"overlay",attrs:{show:e.classesLoading,"no-center":""}},[r("h2",[e._v("Liked Classes")]),e.liked.length>0?r("vue-horizontal-list",{attrs:{items:e.liked,options:e.options},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[r("div",{staticClass:"item"},[r("class",{attrs:{type:"like",course:s,"reaction-id":s.reactionId,date:s.date},on:{"selected-reaction":e.displayReactionModal}})],1)]}}],null,!1,1538432866)}):r("div",{staticClass:"empty"},[r("b-card",{staticClass:"empty",attrs:{"bg-variant":"light"}},[r("b-card-body",{staticClass:"no-classes"},[e._v(" No Liked Classes ")])],1)],1),r("br"),r("h2",[e._v("Disliked Classes")]),e.disliked.length>0?r("vue-horizontal-list",{attrs:{items:e.disliked,options:e.options},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[r("div",{staticClass:"item"},[r("class",{attrs:{type:"dislike",course:s,"reaction-id":s.reactionId,date:s.date},on:{"selected-reaction":e.displayReactionModal}})],1)]}}],null,!1,2486251900)}):r("div",{staticClass:"empty"},[r("b-card",{staticClass:"empty",attrs:{"bg-variant":"light"}},[r("b-card-body",{staticClass:"no-classes"},[e._v(" No Disliked Classes ")])],1)],1),r("br"),r("h2",[e._v("Class Wishlist")]),e.wishlist.length>0?r("vue-horizontal-list",{attrs:{items:e.wishlist,options:e.options},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[r("div",{staticClass:"item"},[r("class",{attrs:{type:"wishlist",course:s,"reaction-id":s.reactionId,date:s.date},on:{"selected-reaction":e.displayReactionModal}})],1)]}}],null,!1,4086026350)}):r("div",{staticClass:"empty"},[r("b-card",{staticClass:"empty",attrs:{"bg-variant":"light"}},[r("b-card-body",{staticClass:"no-classes"},[e._v(" No Classes in Wishlist ")])],1)],1),r("br"),r("br")],1)],1)},et=[],tt=r("6336"),rt={name:"UserReactionSection",components:{Class:oe,VueHorizontalList:tt["a"]},props:{requestedUid:String},data:function(){return{classesLoading:!1,options:{responsive:[{end:576,size:1},{start:576,end:768,size:2},{start:768,end:992,size:3},{size:4}],position:{start:-1}},liked:[],disliked:[],wishlist:[]}},methods:{displayReactionModal:function(e,t,r,s){this.$emit("show-reaction",e,t,r,s)},goToCoursePage:function(e){this.$emit("course-page",e)},getReactions:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getReactions?userId=").concat(e));case 2:return s=r.sent,r.next=5,s.json();case 5:n=r.sent,s.ok?(t.liked=n.liked,t.disliked=n.disliked,t.wishlist=n.wishlist):t.$emit("show-error",n.message);case 7:case"end":return r.stop()}}),r)})))()}},computed:{},watch:{requestedUid:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.classesLoading=!0,""===e.requestedUid){t.next=4;break}return t.next=4,e.getReactions(e.requestedUid);case 4:e.classesLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.classesLoading=!0,""===e.requestedUid){t.next=4;break}return t.next=4,e.getReactions(e.requestedUid);case 4:e.classesLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}},st=rt,nt=(r("aef1"),Object(O["a"])(st,Ze,et,!1,null,"23d1b626",null)),at=nt.exports,ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[r("h1",{attrs:{id:"section-title"}},[e._v("Friends")]),e.friends.length>0?r("vue-horizontal-list",{attrs:{items:e.friends,options:e.options},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[r("div",{staticClass:"item"},[r("user",{staticClass:"user",attrs:{user:s},on:{selected:e.goToUserPage}})],1)]}}],null,!1,2748876613)}):r("div",{staticClass:"empty"},[r("b-card",{staticClass:"empty",attrs:{"bg-variant":"light"}},[r("b-card-body",{staticClass:"no-classes"},[e._v(" No Friends ")])],1)],1)],1)],1)},it=[],ct={name:"PeopleSection",components:{User:A,VueHorizontalList:tt["a"]},props:{requestedUid:String},data:function(){return{loading:!1,friends:[],options:{list:{class:"slider",windowed:1200,padding:0},responsive:[{end:576,size:1},{start:576,end:768,size:2},{start:768,end:992,size:3},{size:4}],position:{start:-1}}}},methods:{goToUserPage:function(e){this.$emit("user-page",e)},getUserFriends:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getFriends?userId=").concat(e));case 2:return s=r.sent,r.next=5,s.json();case 5:n=r.sent,s.ok?t.friends=n:t.$emit("show-error",n.message);case 7:case"end":return r.stop()}}),r)})))()}},computed:{},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getUserFriends(e.requestedUid);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},ut=ct,lt=(r("73e1"),Object(O["a"])(ut,ot,it,!1,null,"f657d1e0",null)),dt=lt.exports,mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{attrs:{scrollable:"","hide-footer":"","content-class":"shadow",size:"lg"},on:{hide:e.closeModal},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("reaction",{attrs:{reactionId:e.reactionId,date:e.date,type:e.type,course:e.course,user:e.user,isAdmin:e.isAdmin},on:{"course-page":e.goToCoursePage,"user-page":e.goToUserPage}})],1)},gt=[],ft={name:"ReactionModal",components:{Reaction:he},props:{show:Boolean,date:String,reactionId:String,type:String,course:Object,user:Object,isAdmin:{type:Boolean,required:!1,default:!1}},data:function(){return{showModal:!1,modalLoading:!1,showReactionError:!1,errorMessage:"",comments:[],perPage:3,currentPage:1,totalComments:0,newComment:"",commentsLoading:!1}},methods:{goToCoursePage:function(e){this.$emit("course-page",e)},closeModal:function(){this.$emit("close-reaction")},goToUserPage:function(e){this.$emit("user-page",e)}},computed:{},watch:{show:function(){this.showModal=this.show}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:!1===e.showModal&&e.closeModal();case 1:case"end":return t.stop()}}),t)})))()}},pt=ft,ht=Object(O["a"])(pt,mt,gt,!1,null,"25db8d00",null),bt=ht.exports,vt={name:"UserPage",components:{EditProfile:Qe,NavBar:H,UserReactionSection:at,SubjectsSection:$e,PeopleSection:dt,ReactionModal:bt},props:{requestedUid:String,isAdmin:{type:Boolean,required:!1,default:!1}},data:function(){return{pageLoading:!1,currentUid:y.currentUser.userId,user:{},currentSection:"classes",sectionTitles:[{name:"Classes",value:"classes"},{name:"Subjects",value:"subjects"},{name:"Friends",value:"friends"}],showReaction:!1,selectedReactionId:"",selectedReactionType:"",selectedReactionDate:"",selectedReactionCourse:{},showError:!1,errorMessage:"",validUser:!1,validReactions:!0,validSubjects:!0,validFriends:!0,isFollowing:!1,validFollowStatus:!0,followId:"",editingProfile:!1}},methods:{goToCoursePage:function(e){this.resetReactionData(),this.resetUserData(),this.$emit("course-page",e)},closeReaction:function(){this.resetReactionData()},goToSubjectPage:function(e,t){this.$emit("subject-page",e,t)},displayReactionModal:function(e,t,r,s){this.showReaction=!0,this.selectedReactionId=r,this.selectedReactionDate=s,this.selectedReactionType=e,this.selectedReactionCourse=t},getRequestedUserProfile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getUser?userId=").concat(e));case 2:return s=r.sent,r.next=5,s.json();case 5:n=r.sent,s.ok?(t.user=n,t.validUser=!0):(t.validUser=!1,t.errorMessage=n.message,t.showError=!0);case 7:case"end":return r.stop()}}),r)})))()},getFollowingStatus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isViewingProfile){t.next=4;break}e.isFollowing=!1,t.next=11;break;case 4:return t.next=6,fetch("".concat(y.SERVER_URL,"/bluebook/getFollowingStatus?currentUserId=").concat(e.currentUid,"&userId=").concat(e.requestedUid));case 6:return r=t.sent,t.next=9,r.json();case 9:s=t.sent,r.ok?(e.validFollowStatus=!0,e.isFollowing=s.isFollowing,e.isFollowing?e.followId=s.followId:e.followId=""):(e.validFollowStatus=!1,e.errorMessage=s.message,e.showError=!0);case 11:case"end":return t.stop()}}),t)})))()},addFriend:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pageLoading=!0,!e.isValidFollow){t.next=11;break}return t.next=4,fetch("".concat(y.SERVER_URL,"/bluebook/addFollow?currentUserId=").concat(e.currentUid,"&userId=").concat(e.requestedUid));case 4:return r=t.sent,t.next=7,r.json();case 7:s=t.sent,r.ok?(e.validFollowStatus=!0,e.isFollowing=!0,e.followId=s):(e.errorMessage=s.message,e.showError=!0),t.next=14;break;case 11:console.log("BAD USER INPUT: Unable to add follow due to invalid input."),e.errorMessage="Invalid follow: cannot add follow document with empty followingId or followerId. Please try again.",e.showError=!0;case 14:e.pageLoading=!1;case 15:case"end":return t.stop()}}),t)})))()},removeFriend:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pageLoading=!0,t.next=3,fetch("".concat(y.SERVER_URL,"/bluebook/removeFollow?followId=").concat(e.followId));case 3:return r=t.sent,t.next=6,r.json();case 6:s=t.sent,r.ok?(e.validFollowStatus=!0,e.isFollowing=s,e.followId=""):(e.errorMessage=s.message,e.showError=!0),e.pageLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},editProfile:function(){this.editingProfile=!0},refreshUser:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editingProfile=!1,e.pageLoading=!0,""===e.requestedUid){t.next=9;break}return e.resetReactionData(),e.resetUserData(),t.next=7,e.getRequestedUserProfile(e.requestedUid);case 7:return t.next=9,e.getFollowingStatus();case 9:e.pageLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},signOut:function(){var e=this;this.pageLoading=!0,y.auth.signOut().then((function(){e.$emit("sign-out")})).catch((function(t){e.errorMessage="An error occurred while signing out: ".concat(t,"."),e.showError=!0})),this.pageLoading=!1},changeSection:function(e){this.pageLoading=!0,this.currentSection=e,this.pageLoading=!1},goToUserPage:function(e){this.resetReactionData(),this.user.userId!==e&&(this.resetUserData(),this.$emit("user-page",e))},resetReactionData:function(){this.showReaction=!1,this.selectedReactionId="",this.selectedReactionType="",this.selectedReactionDate="",this.selectedReactionCourse={}},resetUserData:function(){this.user={},this.currentSection="classes"},showReactionError:function(e){this.validReactions=!1,this.showError=!0,this.errorMessage=e},showSubjectError:function(e){this.validSubjects=!1,this.showError=!0,this.errorMessage=e},showPeopleError:function(e){this.validFriends=!1,this.showError=!0,this.errorMessage=e},showEditError:function(e){this.editingProfile=!1,this.showError=!0,this.errorMessage=e},cancelEdit:function(){this.editingProfile=!1}},computed:{loggedIn:function(){return!this.isAdmin&&this.currentUid.length>0},isViewingProfile:function(){return this.currentUid===this.requestedUid},fullSubjectList:function(){var e=[];return this.user.majors.forEach((function(t){e.push({code:t,type:"major"})})),this.user.minors.forEach((function(t){e.push({code:t,type:"minor"})})),this.user.certificates.forEach((function(t){e.push({code:t,type:"certificate"})})),this.user.subjects.forEach((function(t){e.push({code:t,type:"other"})})),e},isValidFollow:function(){return""!==this.currentUid&&""!==this.requestedUid}},watch:{requestedUid:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pageLoading=!0,""===e.requestedUid){t.next=8;break}return e.resetReactionData(),e.resetUserData(),t.next=6,e.getRequestedUserProfile(e.requestedUid);case 6:return t.next=8,e.getFollowingStatus();case 8:e.pageLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pageLoading=!0,e.resetReactionData(),e.resetUserData(),""===e.requestedUid){t.next=8;break}return t.next=6,e.getRequestedUserProfile(e.requestedUid);case 6:return t.next=8,e.getFollowingStatus();case 8:e.pageLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}},wt=vt,Rt=(r("57a4"),Object(O["a"])(wt,We,Ge,!1,null,"5bfea5ec",null)),Ct=Rt.exports,kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{attrs:{id:"page-name"}},[e._v("Log In")]),r("b-overlay",{attrs:{show:e.loading,rounded:"sm"}},[e.validPage?r("div",{staticClass:"log-in"},[r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-email",label:"Email:","label-for":"duke-email",description:"Use your '@duke.edu' email address."}},[r("b-form-input",{attrs:{id:"duke-email",type:"email",placeholder:"Enter email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.showState||e.email.length>0?r("b-form-invalid-feedback",{attrs:{state:e.emailValidation}},[e._v(" Email must be a '@duke.edu' address. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-password",label:"Password:","label-for":"password-input-1"}},[r("b-form-input",{attrs:{id:"password-input-1",placeholder:"Enter password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.showState||e.password.length>0?r("b-form-invalid-feedback",{attrs:{state:e.passwordValidation}},[e._v(" Password must be at least 8 characters long. ")]):e._e()],1),r("br"),r("b-button",{staticClass:"submit-buttons",attrs:{type:"submit",variant:"outline-success"}},[e._v("Log In")]),r("br"),r("div",[e._v(" Need to Create an Account? ")]),r("br"),r("b-button",{staticClass:"submit-buttons",attrs:{type:"reset",variant:"outline-primary"}},[e._v("Sign Up")])],1)],1):r("div",[e._v(" Sorry! There was an error loading the log in page. Please refresh and try again. ")])]),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},jt=[],yt={name:"LogInPage",props:{},data:function(){return{loading:!1,email:"",password:"",showError:!1,errorMessage:"",validPage:!0,showState:!1,validAccount:!0}},methods:{onSubmit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,e.preventDefault(),t.showState=!0,!t.emailValidation||!t.passwordValidation){r.next=6;break}return r.next=6,y.auth.signInWithEmailAndPassword(t.email,t.password).then((function(e){var r=e.user;t.$emit("update-user",r.uid)})).catch(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.validAccount=!1,t.errorMessage=r.message,t.showError=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:t.loading=!1;case 7:case"end":return r.stop()}}),r)})))()},onReset:function(){this.$emit("sign-up")}},computed:{emailValidation:function(){return"duke.edu"===this.email.split("@")[1]},passwordValidation:function(){return this.password.length>=8}},watch:{}},_t=yt,xt=(r("91d1"),Object(O["a"])(_t,kt,jt,!1,null,"309feffd",null)),St=xt.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{attrs:{id:"page-name"}},[e._v("Sign Up")]),r("b-overlay",{attrs:{show:e.loading,rounded:"sm"}},[e.validPage?r("div",{staticClass:"sign-up"},[r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[e.form.picture?r("b-avatar",{attrs:{size:"10rem",src:e.getThumbnail}}):r("b-avatar",{attrs:{size:"10rem"}}),r("br"),r("b-form-group",{attrs:{id:"picture-label",label:"Choose a Profile Picture:","label-for":"input-picture"}},[r("b-form-file",{staticClass:"file",attrs:{id:"input-picture",accept:"image/*"},model:{value:e.form.picture,callback:function(t){e.$set(e.form,"picture",t)},expression:"form.picture"}}),e.form.picture?r("div",[r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-danger"},on:{click:e.clearFiles}},[e._v("Remove photo")])],1):e._e()],1),r("b-form-group",{attrs:{id:"input-name",label:"Name:","label-for":"name-input"}},[r("b-form-input",{attrs:{id:"name-input",placeholder:"Enter name",required:""},model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}}),e.showState?r("b-form-invalid-feedback",{attrs:{state:e.nameValidation}},[e._v(" Please enter a display name. ")]):e._e(),e.showState?r("b-form-valid-feedback",{attrs:{state:e.nameValidation}},[e._v(" Looks Good. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-email",label:"Email:","label-for":"duke-email",description:"Use your '@duke.edu' email address."}},[r("b-form-input",{attrs:{id:"duke-email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.showState||e.form.email.length>0?r("b-form-invalid-feedback",{attrs:{state:e.emailValidation}},[e._v(" Email must be a '@duke.edu' address. ")]):e._e(),e.showState||e.form.email.length>0?r("b-form-valid-feedback",{attrs:{state:e.emailValidation}},[e._v(" Looks Good. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-password",label:"Password:","label-for":"password-input-1"}},[r("b-form-input",{attrs:{id:"password-input-1",placeholder:"Enter password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.showState||e.form.password.length>0?r("b-form-invalid-feedback",{attrs:{state:e.passwordValidation}},[e._v(" Password must be at least 8 characters long. ")]):e._e(),e.showState||e.form.password.length>0?r("b-form-valid-feedback",{attrs:{state:e.passwordValidation}},[e._v(" Looks Good. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-password-2",label:"Confirm Password:","label-for":"password-input-2"}},[r("b-form-input",{attrs:{id:"password-input-2",placeholder:"Confirm password",type:"password",required:""},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}}),e.showState||e.form.confirmPassword.length>0?r("b-form-invalid-feedback",{attrs:{state:e.passwordConfirmationValidation}},[e._v(" Passwords must match. ")]):e._e(),e.showState||e.form.confirmPassword.length>0?r("b-form-valid-feedback",{attrs:{state:e.passwordConfirmationValidation}},[e._v(" Looks Good. ")]):e._e()],1),r("br"),r("b-form-group",{attrs:{id:"input-majors",label:"Majors:","label-for":"major-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.major-modal",modifiers:{"major-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Major(s)")]),r("b-modal",{attrs:{id:"major-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"major-input",stacked:""},model:{value:e.form.majors,callback:function(t){e.$set(e.form,"majors",t)},expression:"form.majors"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validMajor(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.majors.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Majors"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayMajors))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearMajors}},[e._v("Clear Majors")])],1):e._e(),r("br"),r("b-form-group",{attrs:{id:"input-minors",label:"Minors:","label-for":"minor-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.minor-modal",modifiers:{"minor-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Minor(s)")]),r("b-modal",{attrs:{id:"minor-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"minor-input",stacked:""},model:{value:e.form.minors,callback:function(t){e.$set(e.form,"minors",t)},expression:"form.minors"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validMinor(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.minors.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Minors"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayMinors))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearMinors}},[e._v("Clear Minors")])],1):e._e(),r("br"),r("b-form-group",{attrs:{id:"input-certificates",label:"Certificates:","label-for":"certificate-input"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.certificate-modal",modifiers:{"certificate-modal":!0}}],attrs:{variant:"outline-primary"}},[e._v("Select Certificates(s)")]),r("b-modal",{attrs:{id:"certificate-modal","ok-only":"",scrollable:""}},[r("b-form-checkbox-group",{attrs:{id:"certificate-input",stacked:""},model:{value:e.form.certificates,callback:function(t){e.$set(e.form,"certificates",t)},expression:"form.certificates"}},e._l(e.subjects,(function(t,s){return r("b-form-checkbox",{key:s,attrs:{value:t.code,disabled:e.validCertificate(t.code)}},[e._v(e._s(t.name))])})),1)],1)],1),e.form.certificates.length>0?r("b-card",{staticClass:"mt-3",attrs:{header:"Selected Certificates"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.displayCertificates))]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.clearCertificates}},[e._v("Clear Certificates")])],1):e._e(),r("br"),r("b-button",{staticClass:"submit-buttons",attrs:{type:"submit",variant:"outline-success"}},[e._v("Create Account")]),r("b-button",{staticClass:"submit-buttons",attrs:{type:"reset",variant:"outline-danger"}},[e._v("Reset Choices")])],1)],1):r("div",[e._v(" Sorry! There was an error loading the sign up page. Please refresh and try again. ")])]),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},Et=[],Ut={name:"SignUpPage",props:{},data:function(){return{loading:!1,form:{displayName:"",email:"",password:"",picture:null,confirmPassword:"",majors:[],minors:[],certificates:[],subjects:[]},subjects:[],showError:!1,errorMessage:"",validPage:!0,showState:!1,userId:""}},methods:{onSubmit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,e.preventDefault(),t.showState=!0,!(t.nameValidation&&t.emailValidation&&t.passwordValidation&&t.passwordConfirmationValidation)){r.next=8;break}return r.next=6,y.auth.createUserWithEmailAndPassword(t.form.email,t.form.password).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var s,n,a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=r.user,n=s.uid,a="",!t.form.picture){e.next=7;break}return e.next=6,y.storeProfileImage(n,t.form.picture);case 6:a=e.sent;case 7:return o={userId:n,displayName:t.form.displayName,email:t.form.email,majors:null!==t.form.majors?t.form.majors:[],minors:null!==t.form.minors?t.form.minors:[],certificates:null!==t.form.certificates?t.form.certificates:[],subjects:[],picture:a,isAdmin:!1},e.next=10,fetch("".concat(y.SERVER_URL,"/bluebook/createUserDocument"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});case 10:return i=e.sent,e.next=13,i.json();case 13:if(c=e.sent,!i.ok){e.next=19;break}t.showError=!1,t.$emit("update-user",c),e.next=20;break;case 19:throw new Error(c.message);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.deleteUser();case 2:t.errorMessage="There was an error creating your account: ".concat(r,". Please try again."),t.showError=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:r.next=11;break;case 8:console.log("BAD USER INPUT: Unable to create user profile due to invalid user input."),t.errorMessage="Please ensure all the fields are filled out appropriately.",t.showError=!0;case 11:t.loading=!1;case 12:case"end":return r.stop()}}),r)})))()},onReset:function(){this.form={displayName:"",email:"",password:"",picture:null,confirmPassword:"",majors:[],minors:[],certificates:[],subjects:[]}},clearMajors:function(){this.form.majors=[]},clearMinors:function(){this.form.minors=[]},clearCertificates:function(){this.form.certificates=[]},clearFiles:function(){this.form.picture=null},getSubjects:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getAllSubjects"));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.subjects=s,e.validPage=!0):(e.errorMessage=s.message,e.showError=!0,e.validPage=!1);case 7:case"end":return t.stop()}}),t)})))()},validMajor:function(e){return this.form.minors.includes(e)||this.form.certificates.includes(e)},validMinor:function(e){return this.form.majors.includes(e)||this.form.certificates.includes(e)},validCertificate:function(e){return this.form.minors.includes(e)||this.form.majors.includes(e)}},computed:{displayMajors:function(){return this.form.majors.join(", ")},displayMinors:function(){return this.form.minors.join(", ")},displayCertificates:function(){return this.form.certificates.join(", ")},nameValidation:function(){return this.form.displayName.trim().length>0},emailValidation:function(){return"duke.edu"===this.form.email.split("@")[1]},passwordValidation:function(){return this.form.password.trim().length>=8},passwordConfirmationValidation:function(){return this.passwordValidation&&this.form.confirmPassword===this.form.password},getThumbnail:function(){return this.form.picture?URL.createObjectURL(this.form.picture):""}},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getSubjects();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},It=Ut,Tt=(r("ad5d"),Object(O["a"])(It,Pt,Et,!1,null,"3bdace35",null)),Mt=Tt.exports,Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body"},[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[e.disablePage?r("span",[e._v(" Please refresh page and try again. ")]):r("span",[r("h1",{attrs:{id:"page-name"}},[e._v(e._s(e.course.title))]),r("h2",[e._v(e._s(e.course.subjectCode+" "+e.course.catalogNumber))]),e.loggedIn?r("div",{staticClass:"reactions"},[e.userReaction.like?r("b-button",{staticClass:"reaction",attrs:{variant:"success"},on:{click:e.removeReaction}},[e._v(" Remove Like ")]):r("b-button",{staticClass:"reaction",attrs:{variant:"outline-success"},on:{click:e.addLike}},[e._v(" Like Class ")]),e.userReaction.dislike?r("b-button",{staticClass:"reaction",attrs:{variant:"danger"},on:{click:e.removeReaction}},[e._v(" Remove Dislike ")]):r("b-button",{staticClass:"reaction",attrs:{variant:"outline-danger"},on:{click:e.addDislike}},[e._v(" Dislike Class ")]),e.userReaction.wishlist?r("b-button",{staticClass:"reaction",attrs:{variant:"primary"},on:{click:e.removeReaction}},[e._v(" Remove from Wishlist ")]):r("b-button",{staticClass:"reaction",attrs:{variant:"outline-primary"},on:{click:e.addToWishlist}},[e._v(" Add to Wishlist ")])],1):e._e(),r("br"),r("div",{staticClass:"center"},[r("label",{attrs:{for:"avg-rating-interesting"}},[e._v("Average Interesting Rating:")]),r("b-form-rating",{staticClass:"mb-2 rating",attrs:{id:"avg-rating-interesting",value:e.courseInfo.interesting,size:"lg",readonly:"","no-border":"",variant:"primary"}}),r("label",{attrs:{for:"avg-rating-difficulty"}},[e._v("Average Difficulty Rating:")]),r("b-form-rating",{staticClass:"mb-2 rating",attrs:{id:"avg-rating-difficulty",value:e.courseInfo.difficulty,size:"lg",readonly:"","no-border":"",variant:"danger"}})],1),r("h3",[e._v("Description")]),r("div",{staticClass:"description"},[e._v(" "+e._s(e.courseInfo.description)+" ")]),r("br"),r("h3",[e._v("Course Attributes")]),e.courseInfo.courseCodes&&e.courseInfo.courseCodes.length>0?r("vue-horizontal-list",{attrs:{items:e.courseInfo.courseCodes,options:e.options},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[r("div",{staticClass:"item attributes"},[r("b-card",{attrs:{"border-variant":"primary"},on:{click:function(t){return e.goToAttributePage(s)}}},[r("b-card-body",[e._v(" "+e._s(s)+" ")])],1)],1)]}}],null,!1,2318776672)}):r("div",{staticClass:"empty no-attributes"},[r("b-card",{staticClass:"empty",attrs:{"outline-variant":"dark"}},[r("b-card-body",{staticClass:"no-classes"},[e._v("No Course Attributes")])],1)],1),r("br"),e.loggedIn?r("h3",{staticClass:"center"},[e._v("Rate:")]):e._e(),e.loggedIn?r("div",{staticClass:"rating"},[r("label",{staticClass:"mt-3",attrs:{for:"rating-interesting"}},[e._v("Interesting")]),r("b-form-rating",{attrs:{id:"rating-interesting",size:"lg","no-border":"","show-clear":"",variant:"primary"},model:{value:e.interestingRating,callback:function(t){e.interestingRating=t},expression:"interestingRating"}}),r("br"),r("label",{staticClass:"mt-3",attrs:{for:"rating-lg"}},[e._v("Difficulty")]),r("b-form-rating",{attrs:{id:"rating-difficulty",size:"lg","no-border":"","show-clear":"",variant:"danger"},model:{value:e.difficultyRating,callback:function(t){e.difficultyRating=t},expression:"difficultyRating"}})],1):e._e(),r("h3",{staticClass:"center"},[e._v("Comments")]),r("b-overlay",{attrs:{show:e.commentsLoading,rounded:"sm"}},[r("div",{staticClass:"comment-section"},[e.loggedIn?r("b-input-group",{staticClass:"mb-3",attrs:{size:"sm"}},[r("b-form-textarea",{attrs:{id:"comment-textarea",placeholder:"Leave a comment here",rows:"1","max-rows":"8"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postComment(t)}},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}}),r("b-input-group-append",[r("b-button",{attrs:{size:"sm",text:"Button",variant:"success",disabled:0==e.newComment.trim().length},on:{click:e.postComment}},[e._v(" Post ")])],1)],1):e._e()],1),r("comment-section",{attrs:{comments:e.displayComments},on:{"user-page":e.goToUserPage,"delete-comment":e.deleteComment}}),r("b-pagination",{attrs:{"total-rows":e.totalComments,"per-page":e.perPage,"aria-controls":"comment-section",pills:"","hide-goto-end-buttons":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)]),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)},Lt=[],At={name:"CoursePage",components:{VueHorizontalList:tt["a"],CommentSection:me},props:{requestedCourseId:String,course:Object,isAdmin:{type:Boolean,required:!1,default:!1}},data:function(){return{loading:!1,currentUid:y.currentUser.userId,showError:!1,disablePage:!1,errorMessage:"",courseInfo:{},userReaction:{},userRating:{},difficultyRating:0,interestingRating:0,comments:[],perPage:5,currentPage:1,totalComments:0,newComment:"",commentsLoading:!1,options:{responsive:[{end:576,size:1},{start:576,end:768,size:2},{start:768,end:992,size:3},{size:4}],position:{start:-1}}}},methods:{getCourseInformation:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getCourseInformation?courseId=").concat(e.requestedCourseId));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.courseInfo=s.course,e.comments=s.comments):(e.errorMessage=s.message,e.showError=!0,e.disablePage=!0);case 7:case"end":return t.stop()}}),t)})))()},getUserInteractions:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getUserInteractions?courseId=").concat(t,"&userId=").concat(e));case 2:return n=s.sent,s.next=5,n.json();case 5:a=s.sent,n.ok?(r.userReaction=a.reaction,r.userRating=a.rating,r.difficultyRating=a.rating.difficulty,r.interestingRating=a.rating.interesting):(r.errorMessage=a.message,r.showError=!0,r.disablePage=!0);case 7:case"end":return s.stop()}}),s)})))()},updateUserReaction:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,!t.isValidReaction(e)){r.next=11;break}return r.next=4,fetch("".concat(y.SERVER_URL,"/bluebook/updateUserReaction?courseId=").concat(t.requestedCourseId,"&userId=").concat(t.currentUid),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return s=r.sent,r.next=7,s.json();case 7:n=r.sent,s.ok?(t.courseInfo=n.courseInfo,t.userReaction=n.reaction,t.userRating=n.rating,t.difficultyRating=n.rating.difficulty,t.interestingRating=n.rating.interesting):(t.errorMessage=n.message,t.showError=!0,t.disablePage=!0),r.next=15;break;case 11:console.log("BAD USER INPUT: Unable to react to course due to invalid input."),t.errorMessage="Invalid reaction: cannot write reaction document with empty userId or courseId. Please try again.",t.showError=!0,t.disablePage=!0;case 15:t.loading=!1;case 16:case"end":return r.stop()}}),r)})))()},updateUserRating:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,!t.isValidRating){r.next=11;break}return r.next=4,fetch("".concat(y.SERVER_URL,"/bluebook/updateUserRating?courseId=").concat(t.requestedCourseId,"&userId=").concat(t.currentUid),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return s=r.sent,r.next=7,s.json();case 7:n=r.sent,s.ok?(t.courseInfo=n.courseInfo,t.userReaction=n.reaction,t.userRating=n.rating,t.difficultyRating=n.rating.difficulty,t.interestingRating=n.rating.interesting):(t.errorMessage=n.message,t.showError=!0,t.disablePage=!0),r.next=15;break;case 11:console.log("BAD USER INPUT: Unable to rate course due to invalid input."),t.errorMessage="Invalid rating: cannot write rating document with empty userId or courseId. Please try again.",t.showError=!0,t.disablePage=!0;case 15:t.loading=!1;case 16:case"end":return r.stop()}}),r)})))()},addLike:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={like:!0,dislike:!1,wishlist:!1},t.next=3,e.updateUserReaction(r);case 3:case"end":return t.stop()}}),t)})))()},removeReaction:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={like:!1,dislike:!1,wishlist:!1},t.next=3,e.updateUserReaction(r);case 3:case"end":return t.stop()}}),t)})))()},addDislike:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={like:!1,dislike:!0,wishlist:!1},t.next=3,e.updateUserReaction(r);case 3:case"end":return t.stop()}}),t)})))()},addToWishlist:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={like:!1,dislike:!1,wishlist:!0},t.next=3,e.updateUserReaction(r);case 3:case"end":return t.stop()}}),t)})))()},goToUserPage:function(e){this.clearData(),this.$emit("user-page",e)},clearData:function(){this.showError=!1,this.disablePage=!1,this.errorMessage="",this.comments=[],this.totalComments=0,this.newComment=""},postComment:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.commentsLoading=!0,!e.isValidComment){t.next=16;break}return e.errorMessage="",e.comments=[],e.totalComments=0,r={courseId:e.requestedCourseId,userId:e.currentUid,commentText:e.newComment},t.next=8,fetch("".concat(y.SERVER_URL,"/bluebook/postCourseComment"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});case 8:return s=t.sent,t.next=11,s.json();case 11:n=t.sent,e.newComment="",s.ok?(e.comments=n,e.totalComments=n.length):(e.errorMessage=n.message,e.showError=!0),t.next=19;break;case 16:console.log("BAD USER INPUT: Unable to comment on course due to invalid input."),e.errorMessage="Invalid comment: cannot write comment document with empty userId or courseId. Please try again.",e.showError=!0;case 19:e.commentsLoading=!1;case 20:case"end":return t.stop()}}),t)})))()},deleteComment:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.commentsLoading=!0,t.errorMessage="",t.comments=[],t.newComment="",t.totalComments=0,r.next=7,fetch("".concat(y.SERVER_URL,"/bluebook/deleteCourseComment?commentId=").concat(e,"&courseId=").concat(t.requestedCourseId));case 7:return s=r.sent,r.next=10,s.json();case 10:n=r.sent,s.ok?(t.comments=n,t.totalComments=n.length):(t.errorMessage=n.message,t.showError=!0),t.commentsLoading=!1;case 13:case"end":return r.stop()}}),r)})))()},goToAttributePage:function(e){this.$emit("attribute-page",e)},isValidRating:function(e){return""!==this.requestedCourseId&&""!==this.currentUid&&null!==e.difficulty&&null!==e.interesting},isValidReaction:function(e){return""!==this.requestedCourseId&&""!==this.currentUid&&null!==e.like&&null!==e.dislike&&null!==e.wishlist&&!(e.like&&e.dislike)&&!(e.like&&e.wishlist)&&!(e.dislike&&e.wishlist)}},computed:{loggedIn:function(){return!this.isAdmin&&this.currentUid.length>0},numPages:function(){return Math.ceil(this.totalComments/this.perPage)},displayComments:function(){var e=(this.currentPage-1)*this.perPage;return this.comments.slice(e,e+this.perPage)},isValidComment:function(){return""!==this.requestedCourseId&&""!==this.currentUid&&""!==this.newComment.trim()}},watch:{difficultyRating:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading){t.next=4;break}return r={interesting:e.interestingRating,difficulty:e.difficultyRating},t.next=4,e.updateUserRating(r);case 4:case"end":return t.stop()}}),t)})))()},interestingRating:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading){t.next=4;break}return r={interesting:e.interestingRating,difficulty:e.difficultyRating},t.next=4,e.updateUserRating(r);case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getCourseInformation();case 3:if(!e.loggedIn){t.next=6;break}return t.next=6,e.getUserInteractions(e.currentUid,e.requestedCourseId);case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}},Vt=At,Nt=(r("c1ad"),Object(O["a"])(Vt,Ot,Lt,!1,null,"69dfffb1",null)),Ft=Nt.exports,$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[r("h1",{attrs:{id:"page-name"}},[e._v(e._s(e.subjectName))]),e.loggedIn?r("div",{staticClass:"reactions"},[e.likesSubject?r("b-button",{staticClass:"reaction",attrs:{variant:"outline-danger"},on:{click:e.removeSubject}},[e._v(" Remove Subject from Profile ")]):e.isMajor?r("b-button",{staticClass:"reaction",attrs:{variant:"outline-primary",disabled:""}},[e._v(" Majoring in "+e._s(e.subjectName)+" ")]):e.isMinor?r("b-button",{staticClass:"reaction",attrs:{variant:"outline-primary",disabled:""}},[e._v(" Minoring in "+e._s(e.subjectName)+" ")]):e.isCertificate?r("b-button",{staticClass:"reaction",attrs:{variant:"outline-primary",disabled:""}},[e._v(" Pursuing Certificate in "+e._s(e.subjectName)+" ")]):r("b-button",{staticClass:"reaction",attrs:{variant:"outline-success"},on:{click:e.addSubject}},[e._v(" Add Subject to Profile ")])],1):e._e(),r("div",{staticClass:"search"},[r("b-input-group",{staticClass:"mb-3",attrs:{size:"sm",prepend:"Course Titles"}},[r("b-form-input",{attrs:{"aria-label":"Search courses for "+e.subjectName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchResults(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("b-input-group-append",[e.isFiltered?e._e():r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.searchResults}},[e._v("Search")]),e.isFiltered?r("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:e.clearSearch}},[e._v("Clear Search")]):e._e()],1)],1)],1),r("classes-section",{attrs:{classes:e.courses},on:{"course-page":e.goToCoursePage}}),e.courses.length>0&&e.hasMoreResults?r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.getMoreClasses}},[e._v(" See More Courses ")]):e._e(),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)],1)},qt=[],Dt=(r("a434"),{name:"SubjectPage",components:{ClassesSection:Oe},props:{subjectCode:String,subjectName:String,isAdmin:{type:Boolean,required:!1,default:!1}},data:function(){return{currentUid:y.currentUser.userId,loading:!1,courses:[],showError:!1,errorMessage:"",userMajors:[],userMinors:[],userCertificates:[],userSubjects:[],currentStart:0,totalResults:0,perPage:25,lastValue:"",searchText:"",isFiltered:!1}},methods:{goToCoursePage:function(e){this.$emit("course-page",e)},getCourses:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getCoursesForSubject?subjectCode=").concat(encodeURIComponent(e.subjectCode),"&start=").concat(encodeURIComponent(e.lastValue),"&limit=").concat(e.perPage));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!1,e.courses=e.courses.concat(s.results),e.totalResults=s.totalResults,e.lastValue=s.lastValue,e.currentStart+=e.perPage):(e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},getUsersSubjects:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getUserSubjects?userId=").concat(e));case 2:return s=r.sent,r.next=5,s.json();case 5:n=r.sent,s.ok?(t.userMajors=n.majors,t.userMinors=n.minors,t.userCertificates=n.certificates,t.userSubjects=n.subjects):(t.errorMessage=n.message,t.showError=!0);case 7:case"end":return r.stop()}}),r)})))()},updateUserSubjects:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,!t.loggedIn){r.next=11;break}return r.next=4,fetch("".concat(y.SERVER_URL,"/bluebook/updateUserSubjects?userId=").concat(t.currentUid),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return s=r.sent,r.next=7,s.json();case 7:n=r.sent,s.ok?t.userSubjects=n:(t.errorMessage=n.message,t.showError=!0),r.next=14;break;case 11:console.log("BAD USER INPUT: Unable to add course to profile due to invalid input."),t.errorMessage="Invalid subjects: cannot update subjects for user document with empty userId. Please try again.",t.showError=!0;case 14:t.loading=!1;case 15:case"end":return r.stop()}}),r)})))()},removeSubject:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userSubjects.indexOf(e.subjectCode),s=e.userSubjects,s.splice(r,r+1),t.next=5,e.updateUserSubjects(s);case 5:case"end":return t.stop()}}),t)})))()},addSubject:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userSubjects,r.push(e.subjectCode),t.next=4,e.updateUserSubjects(r);case 4:case"end":return t.stop()}}),t)})))()},getMoreClasses:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.hasMoreResults){t.next=4;break}return t.next=4,e.getCourses();case 4:e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},getFilteredResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getFilteredCoursesForSubject?subjectCode=").concat(encodeURIComponent(e.subjectCode),"&searchTerm=").concat(encodeURIComponent(e.searchText)));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!0,e.courses=e.courses.concat(s.results),e.totalResults=s.totalResults,e.currentStart+=e.totalResults,e.lastValue=s.lastValue,e.validResults=!0):(e.validSubjects=!1,e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},searchResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.courses=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=7,e.getFilteredResults();case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},clearSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.searchText="",e.courses=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=8,e.getCourses();case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}},computed:{loggedIn:function(){return!this.isAdmin&&this.currentUid.length>0},hasMoreResults:function(){return this.currentStart<this.totalResults},likesSubject:function(){return this.userSubjects.includes(this.subjectCode)},isMajor:function(){return this.userMajors.includes(this.subjectCode)},isMinor:function(){return this.userMinors.includes(this.subjectCode)},isCertificate:function(){return this.userCertificates.includes(this.subjectCode)}},watch:{},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getCourses();case 3:if(!e.loggedIn){t.next=6;break}return t.next=6,e.getUsersSubjects(e.currentUid);case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}),zt=Dt,Bt=(r("7a39"),Object(O["a"])(zt,$t,qt,!1,null,"455a72b2",null)),Wt=Bt.exports,Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-overlay",{staticClass:"overlay",attrs:{show:e.loading,"no-center":""}},[r("h1",{attrs:{id:"page-name"}},[e._v(e._s(e.attributeName))]),r("div",{staticClass:"search"},[r("b-input-group",{staticClass:"mb-3",attrs:{size:"sm",prepend:"Course Titles"}},[r("b-form-input",{attrs:{"aria-label":"Search courses for "+e.attributeName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchResults(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("b-input-group-append",[e.isFiltered?e._e():r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.searchResults}},[e._v("Search")]),e.isFiltered?r("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:e.clearSearch}},[e._v("Clear Search")]):e._e()],1)],1)],1),r("classes-section",{attrs:{classes:e.courses},on:{"course-page":e.goToCoursePage}}),e.courses.length>0&&e.hasMoreResults?r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.getMoreClasses}},[e._v(" See More Courses ")]):e._e(),r("b-modal",{model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[r("div",{staticClass:"modal-body"},[e._v(" "+e._s(e.errorMessage)+" ")])])],1)],1)},Jt=[],Yt={name:"AttributePage",components:{ClassesSection:Oe},props:{attributeName:String},data:function(){return{loading:!1,courses:[],showError:!1,errorMessage:"",currentStart:0,totalResults:0,perPage:25,lastValue:"",searchText:"",isFiltered:!1}},methods:{goToCoursePage:function(e){this.$emit("course-page",e)},getCourses:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getCoursesForAttribute?attribute=").concat(encodeURIComponent(e.attributeName),"&start=").concat(encodeURIComponent(e.lastValue),"&limit=").concat(e.perPage));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!1,e.courses=e.courses.concat(s.results),e.totalResults=s.totalResults,e.lastValue=s.lastValue,e.currentStart+=e.perPage):(e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},getMoreClasses:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.hasMoreResults){t.next=4;break}return t.next=4,e.getCourses();case 4:e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},getFilteredResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getFilteredCoursesForAttribute?attribute=").concat(encodeURIComponent(e.attributeName),"&searchTerm=").concat(encodeURIComponent(e.searchText)));case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,r.ok?(e.isFiltered=!0,e.courses=e.courses.concat(s.results),e.totalResults=s.totalResults,e.currentStart+=e.totalResults,e.lastValue=s.lastValue,e.validResults=!0):(e.validSubjects=!1,e.errorMessage=s.message,e.showError=!0);case 7:case"end":return t.stop()}}),t)})))()},searchResults:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.courses=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=7,e.getFilteredResults();case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},clearSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.searchText="",e.courses=[],e.lastValue="",e.totalResults=0,e.currentStart=0,t.next=8,e.getCourses();case 8:e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()}},computed:{hasMoreResults:function(){return this.currentStart<this.totalResults}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getCourses();case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()}},Kt=Yt,Ht=Object(O["a"])(Kt,Gt,Jt,!1,null,"01bfebe5",null),Xt=Ht.exports,Qt={name:"App",components:{AdminPage:B,NavBar:H,FeedPage:Re,ExplorePage:Be,UserPage:Ct,LogInPage:St,SignUpPage:Mt,CoursePage:Ft,SubjectPage:Wt,AttributePage:Xt},data:function(){return{currentUid:y.currentUser.userId,requestedUid:"",currentPage:this.startPage,pageLoading:!1,requestedCourseId:"",requestedCourse:{},requestedSubject:{},requestedAttribute:"",currentUser:{}}},methods:{changePage:function(e){this.pageLoading=!0,this.currentPage=e,this.pageLoading=!1},goToUserPage:function(e){this.pageLoading=!0,this.requestedUid=e,this.currentPage="user",this.pageLoading=!1},goToSubjectPage:function(e,t){this.pageLoading=!0,this.requestedSubject={code:e,name:t},this.currentPage="subject",this.pageLoading=!1},goToAttributePage:function(e){this.pageLoading=!0,this.requestedAttribute=e,this.currentPage="attribute",this.pageLoading=!1},goToCoursePage:function(e){this.pageLoading=!0,this.requestedCourse=e,this.requestedCourseId=e.courseId,this.currentPage="course",this.pageLoading=!1},updateUser:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.pageLoading=!0,t.currentUid=e,!t.loggedIn){r.next=7;break}return r.next=5,t.getCurrentUser(t.currentUid);case 5:return r.next=7,t.updateVisits(t.currentUid);case 7:t.currentPage=t.startPage,t.pageLoading=!1;case 9:case"end":return r.stop()}}),r)})))()},updateVisits:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/updateUserVisits?userId=").concat(e));case 2:r=t.sent,r.ok?console.log("Updated user visit count."):console.log("Failed to update user visit count.");case 4:case"end":return t.stop()}}),t)})))()},signOutUser:function(){this.pageLoading=!0,this.currentUid="",this.currentPage="explore",this.pageLoading=!1},getCurrentUser:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(y.SERVER_URL,"/bluebook/getUser?userId=").concat(e));case 2:return s=r.sent,r.next=5,s.json();case 5:n=r.sent,s.ok?(t.currentUser=n,t.validUser=!0):(t.validUser=!1,t.errorMessage=n.message,t.showError=!0);case 7:case"end":return r.stop()}}),r)})))()}},computed:{loggedIn:function(){return this.currentUid.length>0},getNavBarTitles:function(){return this.loggedIn?this.isAdmin?[{name:"Admin",value:"admin"}]:[{name:"Feed",value:"feed"},{name:"Explore",value:"explore"},{name:"Profile",value:"profile"}]:[{name:"Explore",value:"explore"},{name:"Log In",value:"login"},{name:"Sign Up",value:"signup"}]},isAdmin:function(){return this.currentUser.isAdmin},startPage:function(){return this.loggedIn?this.isAdmin?"admin":"profile":"explore"}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.pageLoading=!0,e.currentUid=y.currentUser.userId,!e.loggedIn){t.next=7;break}return t.next=5,e.getCurrentUser(e.currentUid);case 5:return t.next=7,e.updateVisits(e.currentUid);case 7:e.currentPage=e.startPage,e.pageLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}},Zt=Qt,er=(r("034f"),Object(O["a"])(Zt,o,i,!1,null,null,null)),tr=er.exports,rr=!0;s["default"].config.productionTip=!1,s["default"].use(n["a"]),s["default"].component("BIcon",a["a"]),y.auth.onAuthStateChanged((function(e){y.updateUser(e),rr&&new s["default"]({render:function(e){return e(tr)}}).$mount("#app"),rr=!1}))},5763:function(e,t,r){"use strict";r("5638")},"57a4":function(e,t,r){"use strict";r("764d")},"582a":function(e,t,r){"use strict";r("2afe")},"662e":function(e,t,r){},"71d5":function(e,t,r){},"73e1":function(e,t,r){"use strict";r("e091")},7614:function(e,t,r){},"764d":function(e,t,r){},"7a39":function(e,t,r){"use strict";r("9872")},"7abc":function(e,t,r){},"7c5d":function(e,t,r){"use strict";r("71d5")},"7d93":function(e,t,r){},8372:function(e,t,r){"use strict";r("662e")},"85ec":function(e,t,r){},"881d":function(e,t,r){},"8d05":function(e,t,r){},"91d1":function(e,t,r){"use strict";r("12e6")},9872:function(e,t,r){},ad5d:function(e,t,r){"use strict";r("8d05")},aef1:function(e,t,r){"use strict";r("40d9")},c1ad:function(e,t,r){"use strict";r("3922")},c5ad:function(e,t,r){"use strict";r("7614")},c666:function(e,t,r){"use strict";r("7d93")},ddf2:function(e,t,r){},e091:function(e,t,r){},e272:function(e,t,r){"use strict";r("ddf2")},e4a6:function(e,t,r){"use strict";r("1de0")},ec19:function(e,t,r){},f75a:function(e,t,r){"use strict";r("881d")}});
//# sourceMappingURL=app.17eb1bae.js.map